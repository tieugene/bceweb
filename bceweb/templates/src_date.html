{% extends "base.html" %}
{% block title %} Date blocks {% endblock %}
{% block head %}
    <style>
        body {
            display: flex;
            flex-direction: column;
        }
        iframe#tab_bks_content {
            width: 100%;
            flex-grow: 1;
        }
        input[type="radio"] + label {
            background-color: gainsboro;
        }
        /* Navigation */
        input[type="radio"] { display: none;}
        input[type="radio"]:checked + label { display: none;}
        input[type="radio"] ~ .tab_content { display: none; }
        #tab_info:checked ~ #tab_info_content,
        #tab_bks:checked ~ #tab_bks_content { display: block; }
    </style>
{% endblock %}
{% block body %}
    <h1> Date:
        {% if data.date.day > 1 %}
            <a href="{{ url_for('bceweb.src_date', y=data.date.year, m=data.date.month, d=1) }}"> {% include "img/to-beg.html" %} </a>
            <a href="{{ url_for('bceweb.src_date', y=data.date.year, m=data.date.month, d=data.date.day - 1) }}"> {% include "img/to-prev.html" %} </a>
        {% else %}
            {% include "img/to-beg.html" %}
            {% include "img/to-prev.html" %}
        {% endif %}
        <a href="{{ url_for('bceweb.src_year', y=data.date.year) }}">{{ data.date.year }}</a>-<a href="{{ url_for('bceweb.src_month', y=data.date.year, m=data.date.month) }}">{{ "%02d" | format(data.date.month) }}</a>-{{ "%02d" | format(data.date.day) }}
        {% if data.date.day < data.max_dom %}
            <a href="{{ url_for('bceweb.src_date', y=data.date.year, m=data.date.month, d=data.date.day + 1) }}"> {% include "img/to-next.html" %} </a>
            <a href="{{ url_for('bceweb.src_date', y=data.date.year, m=data.date.month, d=data.max_dom) }}"> {% include "img/to-end.html" %} </a>
        {% else %}
            {% include "img/to-next.html" %}
            {% include "img/to-end.html" %}
        {% endif %}
    </h1>
<!-- Tab switcher -->
<input type="radio" name="tabs" class="tab_radio" id="tab_info" checked />
<label for="tab_info"> &lArr; Show Info </label>
<input type="radio" name="tabs" class="tab_radio" id="tab_bks" />
<label for="tab_bks"> Show Blocks &rArr; </label>

<!-- Tab 1: Info -->
<table class="tab_content thick" id="tab_info_content">
    {% if data.stat.d is none %}
    <tr> <th colspan="3"> Stat n/a </th></tr>
    {% else %}
    <tr>
        <th> Attribute </th>
        <th> # </th>
        <th> &#8383; </th>
    </tr>
    <tr>
        <th> BKs: </th>
        <td class="right"> <i>(TODO)</i> </td>
        <td></td>
    </tr>
    <tr>
        <th> So </th>
        <td class="right"> {{ data.stat.so_num }} </td>
        <td class="right"> {{ data.stat.so_sum|sa2btc }} </td>
    </tr>
    <tr>
        <th> Lo </th>
        <td class="right"> {{ data.stat.lo_num }} </td>
        <td class="right"> {{ data.stat.lo_sum|sa2btc }} </td>
    </tr>
    <tr>
        <th> Uo </th>
        <td class="right"> {{ data.stat.uo_num }} </td>
        <td class="right"> {{ data.stat.uo_sum|sa2btc }} </td>
    </tr>
    <tr>
        <th title="Uo - So"> &Delta; </th>
        <td></td>
        <td class="right"> {{ (data.stat.uo_sum - data.stat.so_sum)|sa2btc }} </td>
    </tr>
<!-- +_inc -->
    <tr> <th colspan="3"> &sum;: </th> </tr>
    <tr>
        <th> BKs: </th>
        <td class="right"> <i>(TODO)</i> </td>
        <td></td>
    </tr>
    <tr>
        <th> So </th>
        <td class="right"> {{ data.stat.so_num_inc }} </td>
        <td class="right"> {{ data.stat.so_sum_inc|sa2btc }} </td>
    </tr>
    <tr>
        <th> Lo </th>
        <td class="right"> {{ data.stat.lo_num_inc }} </td>
        <td class="right"> {{ data.stat.lo_sum_inc|sa2btc }} </td>
    </tr>
    <tr>
        <th> Uo </th>
        <td class="right"> {{ data.stat.uo_num_inc }} </td>
        <td class="right"> {{ data.stat.uo_sum_inc|sa2btc }} </td>
    </tr>
<!-- checks -->
    <tr> <th colspan="3"> Check </th></tr>
    <tr>
        <th title="u+l"> TxO </th>
        <td class="right"> {{ data.stat.uo_num_inc + data.stat.lo_num_inc }}
        <td class="right"> {{ (data.stat.uo_sum_inc + data.stat.lo_sum_inc)|sa2btc }} </td>
    </tr>
    <tr>
        <th title="s+l"> STxO </th>
        <td class="right"> {{ data.stat.so_num_inc + data.stat.lo_num_inc }}
        <td class="right"> {{ (data.stat.so_sum_inc + data.stat.lo_sum_inc)|sa2btc }} </td>
    </tr>
    <tr>
        <th title="u-s"> UTxO </th>
        <td class="right"> {{ data.stat.uo_num_inc - data.stat.so_num_inc }}
        <td class="right"> {{ (data.stat.uo_sum_inc - data.stat.so_sum_inc)|sa2btc }} </td>
    </tr>
    {% endif %}
</table>

<!-- Tab 2: BKs -->
<iframe
    class="tab_content"
    id="tab_bks_content"
    name="frame"
    width="100%"
    src="{{ url_for('bceweb.src_date_blocks', y=data.date.year, m=data.date.month, d=data.date.day) }}">
</iframe>
{% endblock %}
